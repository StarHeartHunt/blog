---
import type { MarkdownHeading } from '@astrojs/markdown-remark';

const { headings } = Astro.props;
---

<div
  class="not-prose fixed bottom-0 right-[max(0px,calc(50%-45rem))] top-[3.8125rem] z-20 hidden w-[19.5rem] overflow-y-auto py-10 xl:block"
>
  <div class="px-8">
    <h5 class="mb-4 text-sm font-semibold leading-6 text-slate-900 dark:text-slate-100">
      On this page
    </h5>
    <ul class="text-sm leading-6 text-slate-700">
      {
        headings &&
          headings.map((heading: MarkdownHeading) => (
            <li class={heading.depth > 2 ? 'ml-4' : ''}>
              <a
                href={'#' + heading.slug}
                class={
                  'block py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300' +
                  (heading.depth == 2 ? ' font-medium' : '') +
                  (heading.depth > 2 ? ' group flex items-start py-1' : '')
                }
              >
                {heading.depth > 2 && (
                  <svg
                    width="3"
                    height="24"
                    viewBox="0 -9 3 24"
                    class="mr-2 overflow-visible text-slate-400 group-hover:text-slate-600 dark:text-slate-600 dark:group-hover:text-slate-500"
                  >
                    <path
                      d="M0 0L3 3L0 6"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                    />
                  </svg>
                )}
                {heading.text}
              </a>
            </li>
          ))
      }
    </ul>
  </div>
</div>
